<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Recuperar Senha - TalentHub</title>
    <link rel="stylesheet" href="checkout-base.css" />
    <style>
      .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1rem;
        position: relative;
      }

      .gradient-bg::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="10" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="40" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="20" cy="60" r="1" fill="rgba(255,255,255,0.1)"/></svg>');
        opacity: 0.3;
      }

      .auth-card {
        width: 100%;
        max-width: 28rem;
        background: white;
        border-radius: var(--radius-xl);
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        padding: 2rem;
        position: relative;
        z-index: 1;
      }

      .back-button {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--muted-foreground);
        text-decoration: none;
        font-size: 0.875rem;
        margin-bottom: 1.5rem;
        transition: color 0.2s;
      }

      .back-button:hover {
        color: var(--primary);
      }

      .back-button svg {
        width: 1rem;
        height: 1rem;
      }

      .logo-section {
        text-align: center;
        margin-bottom: 2rem;
      }

      .logo {
        width: 3rem;
        height: 3rem;
        background: linear-gradient(135deg, var(--primary) 0%, #3b82f6 100%);
        border-radius: var(--radius-lg);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1rem;
      }

      .auth-title {
        font-size: 1.875rem;
        font-weight: 700;
        color: var(--foreground);
        margin-bottom: 0.5rem;
      }

      .auth-subtitle {
        color: var(--muted-foreground);
        font-size: 0.875rem;
        line-height: 1.5;
      }

      .recovery-steps {
        background: var(--muted);
        border-radius: var(--radius-lg);
        padding: 1.5rem;
        margin: 1.5rem 0;
      }

      .recovery-steps h3 {
        font-weight: 600;
        color: var(--foreground);
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .recovery-steps ol {
        margin: 0;
        padding-left: 1.25rem;
        color: var(--muted-foreground);
        font-size: 0.875rem;
        line-height: 1.6;
      }

      .recovery-steps li {
        margin-bottom: 0.5rem;
      }

      .form-group {
        margin-bottom: 1.5rem;
      }

      .input-with-icon {
        position: relative;
      }

      .input-icon {
        position: absolute;
        left: 0.75rem;
        top: 50%;
        transform: translateY(-50%);
        color: #9ca3af;
        pointer-events: none;
        width: 1rem;
        height: 1rem;
      }

      .input-with-icon input {
        padding-left: 2.5rem;
      }

      .form-error {
        color: #dc2626;
        font-size: 0.875rem;
        margin-top: 0.25rem;
        display: none;
      }

      .input.error {
        border-color: #dc2626;
      }

      .success-message {
        background: #dcfce7;
        border: 1px solid #16a34a;
        color: #15803d;
        padding: 1rem;
        border-radius: var(--radius);
        margin-bottom: 1.5rem;
        display: none;
        font-size: 0.875rem;
        line-height: 1.5;
      }

      .success-message svg {
        width: 1rem;
        height: 1rem;
        margin-right: 0.5rem;
        vertical-align: middle;
      }

      .email-sent-state {
        text-align: center;
        display: none;
      }

      .email-sent-state .icon {
        width: 4rem;
        height: 4rem;
        background: #dcfce7;
        border-radius: 50%;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1.5rem;
        color: #16a34a;
      }

      .resend-timer {
        color: var(--muted-foreground);
        font-size: 0.875rem;
        margin-top: 1rem;
      }

      .resend-button {
        background: none;
        border: none;
        color: var(--primary);
        text-decoration: underline;
        cursor: pointer;
        font-size: 0.875rem;
        padding: 0;
        margin-top: 0.5rem;
      }

      .resend-button:hover {
        color: #1e40af;
      }

      .resend-button:disabled {
        color: var(--muted-foreground);
        text-decoration: none;
        cursor: not-allowed;
      }

      .login-link {
        text-align: center;
        margin-top: 1.5rem;
        padding-top: 1.5rem;
        border-top: 1px solid var(--border);
      }

      .login-link p {
        color: var(--muted-foreground);
        font-size: 0.875rem;
      }

      .login-link a {
        color: var(--primary);
        font-weight: 600;
        text-decoration: none;
      }

      .login-link a:hover {
        text-decoration: underline;
      }

      @media (max-width: 480px) {
        .auth-card {
          padding: 1.5rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="gradient-bg">
      <div class="auth-card">
        <a href="login.html" class="back-button">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5"/>
            <path d="M12 19l-7-7 7-7"/>
          </svg>
          Voltar ao login
        </a>

        <div class="logo-section">
          <div class="logo">
            <svg class="w-6 h-6 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="13,2 3,14 12,14 11,22 21,10 12,10 13,2" />
            </svg>
          </div>
          <h1 class="auth-title">Recuperar senha</h1>
          <p class="auth-subtitle">Não se preocupe! Enviaremos instruções para redefinir sua senha.</p>
        </div>

        <!-- Form State -->
        <div id="formState">
          <div class="recovery-steps">
            <h3>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="M12 16v-4"/>
                <path d="M12 8h.01"/>
              </svg>
              Como funciona:
            </h3>
            <ol>
              <li>Digite seu e-mail cadastrado</li>
              <li>Verifique sua caixa de entrada (e spam)</li>
              <li>Clique no link recebido por e-mail</li>
              <li>Defina uma nova senha</li>
            </ol>
          </div>

          <form id="recoveryForm" novalidate>
            <div class="form-group">
              <div class="input-with-icon">
                <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                  <polyline points="22,6 12,13 2,6"/>
                </svg>
                <input
                  type="email"
                  id="email"
                  class="input"
                  placeholder="Digite seu e-mail"
                  required
                />
              </div>
              <div class="form-error" id="emailError">E-mail é obrigatório</div>
            </div>

            <button type="submit" class="btn btn-primary w-full">
              Enviar instruções
            </button>
          </form>
        </div>

        <!-- Success State -->
        <div id="successState" class="email-sent-state">
          <div class="icon">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
              <polyline points="22,6 12,13 2,6"/>
            </svg>
          </div>
          
          <h2 class="auth-title">E-mail enviado!</h2>
          <p class="auth-subtitle">
            Enviamos as instruções para recuperação de senha para:<br>
            <strong id="sentEmail"></strong>
          </p>

          <div class="recovery-steps">
            <h3>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 12l2 2 4-4"/>
                <circle cx="12" cy="12" r="10"/>
              </svg>
              Próximos passos:
            </h3>
            <ol>
              <li>Verifique sua caixa de entrada</li>
              <li>Se não encontrar, verifique a pasta de spam</li>
              <li>Clique no link "Redefinir senha" no e-mail</li>
              <li>Crie uma nova senha segura</li>
            </ol>
          </div>

          <div class="resend-timer" id="resendTimer">
            Não recebeu o e-mail? Você pode solicitar um novo em <span id="countdown">60</span> segundos.
          </div>

          <button id="resendButton" class="resend-button" disabled onclick="resendEmail()">
            Reenviar e-mail
          </button>
        </div>

        <div class="login-link">
          <p>Lembrou da senha? <a href="login.html">Voltar ao login</a></p>
        </div>
      </div>
    </div>

    <script>
      let resendCountdown = 60;
      let countdownInterval;

      document.getElementById('recoveryForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const email = document.getElementById('email');
        let hasErrors = false;

        // Reset errors
        document.querySelectorAll('.form-error').forEach(error => error.style.display = 'none');
        document.querySelectorAll('.input').forEach(input => input.classList.remove('error'));

        // Validate email
        if (!email.value.trim()) {
          document.getElementById('emailError').style.display = 'block';
          email.classList.add('error');
          hasErrors = true;
        } else if (!isValidEmail(email.value)) {
          document.getElementById('emailError').textContent = 'E-mail inválido';
          document.getElementById('emailError').style.display = 'block';
          email.classList.add('error');
          hasErrors = true;
        }

        if (!hasErrors) {
          // Simulate sending email
          const submitBtn = document.querySelector('button[type="submit"]');
          const originalText = submitBtn.textContent;
          submitBtn.textContent = 'Enviando...';
          submitBtn.disabled = true;

          setTimeout(() => {
            showSuccessState(email.value);
          }, 1000);
        }
      });

      function showSuccessState(email) {
        document.getElementById('formState').style.display = 'none';
        document.getElementById('successState').style.display = 'block';
        document.getElementById('sentEmail').textContent = email;
        
        startResendCountdown();
      }

      function startResendCountdown() {
        resendCountdown = 60;
        document.getElementById('resendButton').disabled = true;
        
        countdownInterval = setInterval(() => {
          resendCountdown--;
          document.getElementById('countdown').textContent = resendCountdown;
          
          if (resendCountdown <= 0) {
            clearInterval(countdownInterval);
            document.getElementById('resendTimer').textContent = 'Não recebeu o e-mail?';
            document.getElementById('resendButton').disabled = false;
            document.getElementById('resendButton').textContent = 'Reenviar e-mail';
          }
        }, 1000);
      }

      function resendEmail() {
        const resendButton = document.getElementById('resendButton');
        const originalText = resendButton.textContent;
        
        resendButton.textContent = 'Reenviando...';
        resendButton.disabled = true;
        
        // Simulate resending
        setTimeout(() => {
          resendButton.textContent = 'E-mail reenviado!';
          
          setTimeout(() => {
            startResendCountdown();
          }, 2000);
        }, 1000);
      }

      function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
      }

      // Auto-focus email input
      document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('email').focus();
      });
    </script>
  </body>
</html>
